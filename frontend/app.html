<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Management Aset - PT. Kaiti Global Indonesia</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon" />
    
    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" crossorigin="anonymous" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/styles.css" />
</head>

<body>
    <!-- Sidebar Navigation -->
    <nav id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h5 class="logo">Manajemen Aset</h5>
            <button type="button" id="sidebarCollapse" class="btn btn-sm btn-primary d-md-none">
                <i class="fa fa-times"></i>
            </button>
        </div>
        <ul class="list-unstyled components">
            <li>
                <a href="#" class="sidebar-link active" data-tab="aset">
                    <span class="fa fa-boxes me-2"></span> Daftar Aset
                </a>
            </li>
            <li>
                <a href="#" class="sidebar-link" data-tab="kategori">
                    <span class="fa fa-tags me-2"></span> Kategori Aset
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Navigation -->
        <nav class="navbar navbar-light bg-light shadow-sm">
            <div class="container-fluid">
                <button type="button" id="sidebarToggle" class="btn btn-primary btn-sm me-2 d-md-none">
                    <i class="fa fa-bars"></i>
                </button>
                <span class="navbar-brand">
                    <i class="fa-solid fa-user me-1"></i> 
                    <span id="username-display">User</span>
                </span>
                <button class="btn btn-sm btn-outline-danger" id="logoutBtn">
                    <i class="fa-solid fa-right-from-bracket me-1"></i> Logout
                </button>
            </div>
        </nav>

        <!-- Page Content -->
        <div class="container-fluid p-3 p-md-4">
            <!-- Assets Management Section -->
            <div id="aset-section" class="content-section active">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2 class="mb-1">Manajemen Aset IT</h2>
                        <p class="text-muted mb-0">PT. Kaiti Global Indonesia</p>
                    </div>
                    <div class="d-none d-md-block">
                        <span class="badge bg-primary fs-6" id="total-assets">Total: 0</span>
                    </div>
                </div>

                <!-- Assets List Card -->
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title d-flex justify-content-between align-items-center mb-3">
                            <span>Daftar Aset</span>
                            <span class="badge bg-primary d-md-none" id="total-assets-mobile">Total: 0</span>
                        </h5>

                        <!-- Action Buttons -->
                        <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2">
                            <div class="d-flex flex-wrap gap-2">
                                <button class="btn btn-success btn-sm" id="exportBtn">
                                    <i class="fa-solid fa-file-export me-1"></i> Export
                                </button>
                                <form id="importForm" class="d-flex gap-2">
                                    <input type="file" accept=".xlsx" id="excelFile" class="form-control form-control-sm" />
                                    <button class="btn btn-primary btn-sm" type="submit">
                                        <i class="fa-solid fa-file-import"></i>
                                    </button>
                                </form>
                            </div>
                            <div class="d-flex flex-wrap gap-2 mt-2 mt-md-0">
                                <button class="btn btn-outline-primary btn-sm" id="scanBtn">
                                    <i class="fa-solid fa-camera me-1"></i> Scan
                                </button>
                                <button class="btn btn-primary btn-sm" id="addAssetBtn">
                                    <i class="fa fa-plus me-1"></i> Tambah Aset
                                </button>
                            </div>
                        </div>

                        <!-- Search and Filters -->
                        <div class="row g-2 mb-3">
                            <div class="col-12">
                                <input type="text" class="form-control" placeholder="ðŸ” Cari aset..." id="searchInput" />
                            </div>
                            
                            <div class="col-md-4">
                                <label class="form-label small"><i class="fa-solid fa-clipboard-list me-1"></i> Kategori</label>
                                <select class="form-select form-select-sm" id="categoryFilter">
                                    <option value="">Semua Kategori</option>
                                </select>
                            </div>
                            
                            <div class="col-md-4">
                                <label class="form-label small"><i class="fa-solid fa-qrcode me-1"></i> Kode Aset</label>
                                <input class="form-control form-control-sm" id="codeFilter" />
                            </div>
                            
                            <div class="col-md-4">
                                <label class="form-label small"><i class="fa-solid fa-tags me-1"></i> Brand</label>
                                <input class="form-control form-control-sm" id="brandFilter" />
                            </div>
                        </div>

                        <!-- Assets Table -->
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover table-sm align-middle">
                                <thead class="table-light text-center">
                                    <tr>
                                        <th width="40">#</th>
                                        <th>Kategori</th>
                                        <th>Kode</th>
                                        <th width="70">QR Code</th>
                                        <th>Brand</th>
                                        <th>Deskripsi</th>
                                        <th>Serial</th>
                                        <th>Tanggal</th>
                                        <th>Divisi</th>
                                        <th>User</th>
                                        <th width="50">Qty</th>
                                        <th width="90">Harga</th>
                                        <th width="100">Foto</th>
                                        <th width="100">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="assetsTableBody">
                                    <tr>
                                        <td colspan="14" class="text-center text-muted py-4">
                                            <i class="fa-solid fa-spinner fa-spin fa-2x mb-2 d-block"></i>
                                            Memuat data...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <div class="text-muted small">
                                Menampilkan <span id="showing-count">0</span>
                                dari <span id="total-count">0</span> aset
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-sm btn-outline-primary" id="prevBtn">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-primary" id="nextBtn">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Categories Management Section -->
            <div id="kategori-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Manajemen Kategori</h2>
                    <span class="badge bg-primary fs-6 d-none d-md-block" id="categories-count-badge">0 kategori</span>
                </div>

                <div class="row g-3">
                    <!-- Category Form -->
                    <div class="col-lg-5">
                        <div class="card shadow-sm h-100">
                            <div class="card-body">
                                <h5 class="card-title d-flex justify-content-between align-items-center">
                                    <span id="categoryFormTitle">
                                        <i class="fa-solid fa-plus me-2"></i>Tambah Kategori
                                    </span>
                                </h5>
                                <form id="categoryForm">
                                    <div class="mb-3">
                                        <label class="form-label">Nama Kategori</label>
                                        <input type="text" class="form-control" placeholder="Masukkan nama kategori"
                                            id="categoryName" required maxlength="50" />
                                    </div>
                                    <input type="hidden" id="categoryId">
                                    <div class="d-flex gap-2">
                                        <button type="submit" class="btn btn-primary flex-fill" id="categorySubmitBtn">
                                            Tambah Kategori
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" id="categoryCancelBtn" style="display: none;">
                                            Batal
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Categories List -->
                    <div class="col-lg-7">
                        <div class="card shadow-sm h-100">
                            <div class="card-body">
                                <h5 class="card-title d-flex justify-content-between align-items-center">
                                    <span>Daftar Kategori</span>
                                    <span class="badge bg-primary" id="categoriesCount">0</span>
                                </h5>
                                
                                <div class="list-group list-group-flush" id="categoriesList">
                                    <div class="text-center text-muted py-4">
                                        <i class="fa-solid fa-spinner fa-spin fa-2x mb-2 d-block"></i>
                                        Memuat data kategori...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Asset Form Modal -->
    <div class="modal fade" id="assetModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="assetModalTitle">Tambah Aset Baru</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="assetForm" enctype="multipart/form-data">
                        <div class="row g-3">
                            <!-- Basic Information -->
                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-clipboard-list me-1"></i> Kategori</label>
                                <select class="form-select" id="assetCategory" name="nameCategory" required>
                                    <option value="" disabled selected>Pilih Kategori</option>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-qrcode me-1"></i> Kode Aset</label>
                                <input type="text" class="form-control" placeholder="Kode aset akan digenerate otomatis"
                                    id="assetCode" name="kodeAsset" required />
                            </div>

                            <!-- Asset Details -->
                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-tag me-1"></i> Brand</label>
                                <input type="text" class="form-control" id="assetBrand" name="brand" required />
                            </div>

                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-barcode me-1"></i> Serial Number</label>
                                <input type="text" class="form-control" id="assetSerial" name="serialNumber" required />
                            </div>

                            <div class="col-12">
                                <label class="form-label required"><i class="fa-solid fa-circle-info me-1"></i> Deskripsi</label>
                                <input type="text" class="form-control" id="assetDescription" name="description" required />
                            </div>

                            <!-- Purchase Information -->
                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-calendar me-1"></i> Tanggal Pembelian</label>
                                <input type="date" class="form-control" id="assetPurchaseDate" name="purchaseDate" required />
                            </div>

                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-hashtag me-1"></i> Jumlah</label>
                                <input type="number" class="form-control" id="assetQuantity" name="quantity" required min="1" value="1" />
                            </div>

                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-money-bill me-1"></i> Harga</label>
                                <input type="number" class="form-control" id="assetPrice" name="price" required min="0" step="0.01" />
                            </div>

                            <!-- User Information -->
                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-user-group me-1"></i> Divisi</label>
                                <input type="text" class="form-control" id="assetDivision" name="division" required />
                            </div>

                            <div class="col-md-6">
                                <label class="form-label required"><i class="fa-solid fa-user me-1"></i> Nama Pengguna</label>
                                <input type="text" class="form-control" id="assetUsername" name="username" required />
                            </div>

                            <!-- Specifications -->
                            <div class="col-12" id="specsSection" style="display: none;">
                                <hr />
                                <h6 class="mb-3"><i class="fa-solid fa-microchip me-2"></i>Spesifikasi Teknis</h6>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label required">Prosesor</label>
                                        <input type="text" class="form-control" id="assetProcessor" name="processor" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label required">RAM</label>
                                        <input type="text" class="form-control" id="assetRam" name="ram" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label required">Storage (HDD/SSD)</label>
                                        <input type="text" class="form-control" id="assetHdd" name="hdd" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label required">Sistem Operasi</label>
                                        <input type="text" class="form-control" id="assetOs" name="os" />
                                    </div>
                                </div>
                            </div>

                            <!-- Photo Upload -->
                            <div class="col-12">
                                <hr />
                                <label class="form-label"><i class="fa-solid fa-image me-1"></i> Foto Aset</label>
                                <input type="file" class="form-control" accept="image/*" id="assetPhoto" name="photo" />
                                <div class="form-text">
                                    Format yang didukung: JPG, PNG, GIF. Maksimal 5MB.
                                </div>
                                
                                <!-- Photo Preview -->
                                <div class="mt-3" id="photoPreviewContainer" style="display: none;">
                                    <label class="form-label">Preview Foto:</label>
                                    <div class="border rounded p-2 text-center">
                                        <img id="photoPreview" src="#" alt="Preview Foto" class="img-fluid" style="max-height: 200px; display: none;" />
                                        <div id="currentPhotoInfo" class="mt-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer mt-4">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Batal</button>
                            <button type="submit" class="btn btn-primary" id="assetSubmitBtn">
                                Simpan Aset
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Scan Barcode Modal -->
    <div class="modal fade" id="scanModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Scan Barcode/QR Code</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center">
                        <div id="scanArea" class="border rounded p-2 mb-3 bg-dark position-relative">
                            <video id="scanner-video" width="100%" height="300" style="object-fit: cover;"></video>
                            <canvas id="scanner-canvas" style="display: none;"></canvas>
                            <div class="scanner-overlay">
                                <div class="scanner-frame">
                                    <div class="scanner-laser"></div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <button class="btn btn-primary me-2" id="startScanBtn">
                                <i class="fa-solid fa-camera me-1"></i> Mulai Scan
                            </button>
                            <button class="btn btn-secondary" id="stopScanBtn" disabled>
                                <i class="fa-solid fa-stop me-1"></i> Stop Scan
                            </button>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Hasil Scan:</label>
                            <input type="text" class="form-control" id="scanResult" readonly placeholder="Hasil scan akan muncul di sini...">
                        </div>
                        <div class="mt-2">
                            <small class="text-muted">
                                <i class="fa-solid fa-info-circle me-1"></i>
                                Arahkan kamera ke barcode/QR code aset. Scan otomatis akan mendeteksi kode.
                            </small>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    <button type="button" class="btn btn-primary" id="useScanResultBtn" disabled>
                        <i class="fa-solid fa-check me-1"></i> Gunakan Hasil
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto" id="toast-title">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toast-message"></div>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- ZXing Library for Barcode Scanning -->
    <script src="https://unpkg.com/@zxing/library@0.18.6/umd/index.js"></script>
    
    <!-- Main Application Script -->
    <script src="./assets/js/script.js"></script>
</body>

</html>